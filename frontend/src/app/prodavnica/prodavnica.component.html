<app-header [nazad]="1"></app-header>

<div class="main">
  <h2 style="text-align: center; color:cornflowerblue; font-size: 250%; margin-top: 2%;">Dobrodosli u prodavnicu!</h2>

  <div class="wrapper" style="margin-top: 2%;">
    <div *ngIf="!ucitano" class="spinner-border text-secondary" role="status"></div>

    <div *ngIf="ucitano && sadnice.length == 0 && preparati.length == 0">
      <span style="color: blue;">Trenutno nema proizvoda.</span>
    </div>

    <div *ngIf="ucitano && (sadnice && sadnice.length > 0 || preparati && preparati.length > 0)">
      <ul ngbNav #nav="ngbNav" class="nav-tabs" style="width: 20%; margin-left: 44%; margin-right: 44%;">
        <li [ngbNavItem]="1">
          <a ngbNavLink (click)="promenaTipa('sadnice')">Sadnice</a>
        </li>
        <li [ngbNavItem]="2">
          <a ngbNavLink (click)="promenaTipa('preparati')">Preparati</a>
        </li>
      </ul>

      <div *ngIf="tip == 'sadnice'">

        <div *ngIf="!sadnice || sadnice.length == 0" style="text-align: center;">
          <span style="color: blue;">Trenutno nema sadnica u ponudi.</span>
        </div>

        <table *ngIf="sadnice && sadnice.length > 0" class="table table-striped"
          style="margin-left: 25%; margin-right: 25%; width: 50%;">
          <tr>
            <th>Naziv</th>
            <th>Proizvodjac</th>
            <th>Kolicina</th>
            <th>Na stanju</th>
            <th>Prosecna ocena</th>
            <th>Detalji</th>
          </tr>
          <tr *ngFor="let sadnica of sadnice" (click)="prikaziDetalje(sadnica.idPro)">
            <td>{{sadnica.naziv}}</td>
            <td>{{sadnica['username']}}</td>
            <td>{{sadnica.kolicina}}</td>
            <td>{{sadnica.kolicina > 0 ? "Ima" : "Nema"}}</td>
            <td>{{sadnica.ocena > 0 ? sadnica.ocena.toFixed(2) : "Nema ocena"}}</td>
            <td>
              <button class="btn btn-secondary" (click)="prikaziDetalje(sadnica.idPro)">Prikazi detalje</button>
            </td>
          </tr>
        </table>
      </div>

      <div *ngIf="tip == 'preparati'">

        <div *ngIf="!preparati || preparati.length == 0" style="text-align: center;">
          <span style="color: blue;">Trenutno nema preparata u ponudi.</span>
        </div>

        <table *ngIf="preparati && preparati.length > 0" class="table table-striped"
          style="margin-left: 25%; margin-right: 25%; width: 50%;">
          <tr>
            <th>Naziv</th>
            <th>Proizvodjac</th>
            <th>Kolicina</th>
            <th>Na stanju</th>
            <th>Prosecna ocena</th>
            <th>Detalji</th>
          </tr>
          <tr *ngFor="let preparat of preparati" (click)="prikaziDetalje(preparat.idPro)">
            <td>{{preparat.naziv}}</td>
            <td>{{preparat['username']}}</td>
            <td>{{preparat.kolicina}}</td>
            <td>{{preparat.kolicina > 0 ? "Ima" : "Nema"}}</td>
            <td>{{preparat.ocena > 0 ? preparat.ocena.toFixed(2) : "Nema ocena"}}</td>
            <td>
              <button class="btn btn-secondary" (click)="prikaziDetalje(preparat.idPro)">Prikazi detalje</button>
            </td>
          </tr>
        </table>
      </div>
    </div>

  </div>
</div>

<app-odrzavanje></app-odrzavanje>

<app-footer></app-footer>
